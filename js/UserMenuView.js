define(["backbone","jquery","jquery.urlParams"],function(e,n){return e.View.extend({menuOpened:!1,menuHovered:!1,menuToggleClass:"open",menuHook:"data-toggle-open-id",domElements:{menuTrigger:"a[data-toggle-open]",userMenu:""},selfCloseTimer:!1,iOS:!1,events:{"click a[data-toggle-open]":"doClick","mousedown a[data-toggle-open]":"doPreventDefault","blur a[data-toggle-open]":"doBlur","mouseover div[data-toggle-open-id]":"updateHoverState","mouseout div[data-toggle-open-id]":"updateHoverState",'click a[data-toggle-open="myaccount-login-menu"]':"trackLoginClick","click .my-account-login-link":"trackLoginMyAccountClick","click .optus-community-link":"trackOptusCommunityClick"},initialize:function(){var e=this;e.iOS=navigator.userAgent.match(/(iPod|iPhone|iPad)/),e.domElements.userMenu=n('[data-toggle-open-id="'+n(e.domElements.menuTrigger).attr("data-toggle-open")+'"]')},toggleMenu:function(){var e=this;n(e.domElements.userMenu).toggleClass(e.menuToggleClass),e.menuOpened=!e.menuOpened},closeMenu:function(){var e=this;e.menuOpened&&!e.menuHovered&&(n(e.domElements.userMenu).removeClass(e.menuToggleClass),e.menuOpened=!1),e.iOS&&clearTimeout(e.selfCloseTimer)},doClick:function(e){e.preventDefault();var t=this;return t.toggleMenu(),n(t.domElements.menuTrigger).focus(),t.iOS&&(t.menuOpened?t.selfCloseTimer=setTimeout(function(){t.closeMenu()},4e3):clearTimeout(t.selfCloseTimer)),!1},doBlur:function(e){e.preventDefault();var n=this;n.menuOpened&&n.menuHovered||n.menuOpened&&n.closeMenu()},doPreventDefault:function(e){return e.preventDefault(),!1},updateHoverState:function(e){var n=this;"mouseover"===e.type?n.menuHovered=!0:n.menuHovered=!1},trackLoginClick:function(e){EventTracker.trackLoginButtonClick(e)},trackLoginMyAccountClick:function(e){EventTracker.trackLoginMyAccountLinkClick(e)},trackOptusCommunityClick:function(e){EventTracker.trackOptusCommunityLinkClick(e)}})});
//# sourceMappingURL=UserMenuView.js.map